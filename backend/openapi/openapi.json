{"openapi":"3.1.0","info":{"title":"OpenAPI definition","version":"v0"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"tags":[{"name":"Daily Report Management","description":"Daily report CRUD operations and export functionality"},{"name":"AI Report Generation","description":"AI-powered daily report generation using GPT-5-mini"},{"name":"GitHub認証情報","description":"GitHub API認証情報の管理"},{"name":"Toggl認証情報","description":"Toggl Track API認証情報の管理"},{"name":"Notion認証情報","description":"Notion API認証情報の管理"}],"paths":{"/api/reports/{id}":{"put":{"tags":["Daily Report Management"],"summary":"Update daily report","description":"Update an existing daily report content","operationId":"updateReport","parameters":[{"name":"id","in":"path","description":"Report ID","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DailyReportUpdateRequestDto"}}},"required":true},"responses":{"404":{"description":"Report not found","content":{"application/json":{}}},"200":{"description":"Report updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DailyReportDto"}}}},"400":{"description":"Invalid request data or report not editable","content":{"application/json":{}}},"500":{"description":"Internal server error","content":{"application/json":{}}}}},"delete":{"tags":["Daily Report Management"],"summary":"Delete daily report","description":"Delete a daily report","operationId":"deleteReport","parameters":[{"name":"id","in":"path","description":"Report ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"404":{"description":"Report not found"},"204":{"description":"Report deleted successfully"},"500":{"description":"Internal server error","content":{"application/json":{}}}}}},"/api/reports/{id}/regenerate":{"post":{"tags":["AI Report Generation"],"summary":"Regenerate daily report","description":"Regenerate an existing daily report with user feedback and additional information","operationId":"regenerateReport","parameters":[{"name":"id","in":"path","description":"Report ID","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReportRegenerationRequestDto"}}},"required":true},"responses":{"404":{"description":"Report not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReportGenerationResponseDto"}}}},"400":{"description":"Invalid request data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReportGenerationResponseDto"}}}},"200":{"description":"Report regenerated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReportGenerationResponseDto"}}}},"500":{"description":"Internal server error or AI regeneration failure","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReportGenerationResponseDto"}}}}}}},"/api/reports/{id}/approve":{"post":{"tags":["Daily Report Management"],"summary":"Approve daily report","description":"Approve a daily report, finalizing its content","operationId":"approveReport","parameters":[{"name":"id","in":"path","description":"Report ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Report approved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DailyReportDto"}}}},"404":{"description":"Report not found","content":{"application/json":{}}},"500":{"description":"Internal server error","content":{"application/json":{}}}}}},"/api/reports/generate":{"post":{"tags":["AI Report Generation"],"summary":"Generate daily report","description":"Generate a new daily report using AI based on GitHub, Toggl, and Notion data","operationId":"generateReport","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReportGenerationRequestDto"}}},"required":true},"responses":{"400":{"description":"Invalid request data or report already exists for the date","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReportGenerationResponseDto"}}}},"500":{"description":"Internal server error or AI generation failure","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReportGenerationResponseDto"}}}},"201":{"description":"Report generated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReportGenerationResponseDto"}}}}}}},"/api/credentials/toggl":{"post":{"tags":["Toggl認証情報"],"summary":"Toggl認証情報作成","description":"新しいToggl認証情報を作成します","operationId":"create","parameters":[{"name":"X-User-Id","in":"header","description":"ユーザーID","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TogglCredentialCreateRequestDto"}}},"required":true},"responses":{"500":{"description":"サーバーエラー","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TogglCredentialResponseDto"}}}},"400":{"description":"リクエストデータが不正","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TogglCredentialResponseDto"}}}},"201":{"description":"認証情報の作成に成功","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TogglCredentialResponseDto"}}}}}}},"/api/credentials/notion":{"post":{"tags":["Notion認証情報"],"summary":"Notion認証情報作成","description":"新しいNotion認証情報を作成します","operationId":"create_1","parameters":[{"name":"X-User-Id","in":"header","description":"ユーザーID","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotionCredentialCreateRequestDto"}}},"required":true},"responses":{"500":{"description":"サーバーエラー","content":{"*/*":{"schema":{"$ref":"#/components/schemas/NotionCredentialResponseDto"}}}},"400":{"description":"リクエストデータが不正","content":{"*/*":{"schema":{"$ref":"#/components/schemas/NotionCredentialResponseDto"}}}},"201":{"description":"認証情報の作成に成功","content":{"*/*":{"schema":{"$ref":"#/components/schemas/NotionCredentialResponseDto"}}}}}}},"/api/credentials/github":{"post":{"tags":["GitHub認証情報"],"summary":"GitHub認証情報作成","description":"新しいGitHub認証情報を作成します","operationId":"create_2","parameters":[{"name":"X-User-Id","in":"header","description":"ユーザーID","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GitHubCredentialCreateRequestDto"}}},"required":true},"responses":{"500":{"description":"サーバーエラー","content":{"*/*":{"schema":{"$ref":"#/components/schemas/GitHubCredentialResponseDto"}}}},"400":{"description":"リクエストデータが不正","content":{"*/*":{"schema":{"$ref":"#/components/schemas/GitHubCredentialResponseDto"}}}},"201":{"description":"認証情報の作成に成功","content":{"*/*":{"schema":{"$ref":"#/components/schemas/GitHubCredentialResponseDto"}}}}}}},"/api/reports":{"get":{"tags":["Daily Report Management"],"summary":"Get daily reports list","description":"Retrieve daily reports with optional filtering by date range and status","operationId":"getReports","parameters":[{"name":"userId","in":"query","description":"User ID","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"startDate","in":"query","description":"Start date for filtering (YYYY-MM-DD format)","required":false,"schema":{"type":"string","format":"date"},"example":"2024-01-01"},{"name":"endDate","in":"query","description":"End date for filtering (YYYY-MM-DD format)","required":false,"schema":{"type":"string","format":"date"},"example":"2024-12-31"}],"responses":{"400":{"description":"Invalid request parameters","content":{"application/json":{}}},"200":{"description":"Reports retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DailyReportListResponseDto"}}}},"500":{"description":"Internal server error","content":{"application/json":{}}}}}},"/api/reports/{date}":{"get":{"tags":["Daily Report Management"],"summary":"Get daily report by date","description":"Retrieve a specific daily report for the given date","operationId":"getReportByDate","parameters":[{"name":"date","in":"path","description":"Report date in YYYY-MM-DD format","required":true,"schema":{"type":"string","format":"date"},"example":"2024-01-15"},{"name":"userId","in":"query","description":"User ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Report retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DailyReportDto"}}}},"404":{"description":"Report not found for the specified date","content":{"application/json":{}}},"400":{"description":"Invalid date format","content":{"application/json":{}}},"500":{"description":"Internal server error","content":{"application/json":{}}}}}},"/api/credentials/toggl/test":{"get":{"tags":["Toggl認証情報"],"summary":"ToggleTrack接続テスト","description":"ToggleTrack API接続をテストして、アクセス権限を確認します","operationId":"testConnection","responses":{"200":{"description":"接続テストが正常に完了","content":{"*/*":{"schema":{"type":"boolean"}}}},"500":{"description":"内部サーバーエラーまたはToggleTrack API接続失敗","content":{"*/*":{"schema":{"type":"boolean"}}}}}}},"/api/credentials/toggl/all":{"get":{"tags":["Toggl認証情報"],"summary":"ユーザーの全Toggl認証情報取得","description":"指定されたユーザーの全Toggl認証情報を取得します","operationId":"findAllByUserId","parameters":[{"name":"X-User-Id","in":"header","description":"ユーザーID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"認証情報の取得に成功","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TogglCredentialResponseDto"}}}}},"500":{"description":"サーバーエラー","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TogglCredentialResponseDto"}}}}}}}},"/api/credentials/notion/test":{"get":{"tags":["Notion認証情報"],"summary":"Notion接続テスト","description":"Notion API接続をテストして、アクセス権限を確認します","operationId":"testConnection_1","responses":{"500":{"description":"内部サーバーエラーまたはNotion API接続失敗","content":{"*/*":{"schema":{"type":"boolean"}}}},"200":{"description":"接続テストが正常に完了","content":{"*/*":{"schema":{"type":"boolean"}}}}}}},"/api/credentials/notion/all":{"get":{"tags":["Notion認証情報"],"summary":"ユーザーの全Notion認証情報取得","description":"指定されたユーザーの全Notion認証情報を取得します","operationId":"findAllByUserId_1","parameters":[{"name":"X-User-Id","in":"header","description":"ユーザーID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"認証情報の取得に成功","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/NotionCredentialResponseDto"}}}}},"500":{"description":"サーバーエラー","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/NotionCredentialResponseDto"}}}}}}}},"/api/credentials/github/test":{"get":{"tags":["GitHub認証情報"],"summary":"GitHub接続テスト","description":"GitHub リポジトリ接続をテストして、アクセス権限とリポジトリの存在を確認します","operationId":"testConnection_2","parameters":[{"name":"owner","in":"query","description":"リポジトリオーナー/組織名","required":true,"schema":{"type":"string"},"example":"octocat"},{"name":"repo","in":"query","description":"リポジトリ名","required":true,"schema":{"type":"string"},"example":"Hello-World"}],"responses":{"400":{"description":"リクエストパラメータが無効（owner または repo が不足）","content":{"*/*":{"schema":{"type":"boolean"}}}},"200":{"description":"接続テストが正常に完了","content":{"*/*":{"schema":{"type":"boolean"}}}},"500":{"description":"内部サーバーエラーまたは接続失敗","content":{"*/*":{"schema":{"type":"boolean"}}}}}}},"/api/credentials/github/all":{"get":{"tags":["GitHub認証情報"],"summary":"ユーザーの全GitHub認証情報取得","description":"指定されたユーザーの全GitHub認証情報を取得します","operationId":"findAllByUserId_2","parameters":[{"name":"X-User-Id","in":"header","description":"ユーザーID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"認証情報の取得に成功","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/GitHubCredentialResponseDto"}}}}},"500":{"description":"サーバーエラー","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/GitHubCredentialResponseDto"}}}}}}}},"/api/credentials/toggl/{id}":{"delete":{"tags":["Toggl認証情報"],"summary":"Toggl認証情報削除","description":"指定されたIDのToggl認証情報を削除します","operationId":"delete","parameters":[{"name":"id","in":"path","description":"認証情報ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"404":{"description":"認証情報が見つからない"},"500":{"description":"サーバーエラー"},"204":{"description":"認証情報の削除に成功"}}}},"/api/credentials/notion/{id}":{"delete":{"tags":["Notion認証情報"],"summary":"Notion認証情報削除","description":"指定されたIDのNotion認証情報を削除します","operationId":"delete_1","parameters":[{"name":"id","in":"path","description":"認証情報ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"404":{"description":"認証情報が見つからない"},"500":{"description":"サーバーエラー"},"204":{"description":"認証情報の削除に成功"}}}},"/api/credentials/github/{id}":{"delete":{"tags":["GitHub認証情報"],"summary":"GitHub認証情報削除","description":"指定されたIDのGitHub認証情報を削除します","operationId":"delete_2","parameters":[{"name":"id","in":"path","description":"認証情報ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"404":{"description":"認証情報が見つからない"},"500":{"description":"サーバーエラー"},"204":{"description":"認証情報の削除に成功"}}}}},"components":{"schemas":{"DailyReportUpdateRequestDto":{"type":"object","description":"Report update request","properties":{"editedContent":{"type":"string"},"additionalNotes":{"type":"string"}}},"DailyReportDto":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"userId":{"type":"string","format":"uuid"},"reportDate":{"type":"string","format":"date"},"rawData":{"type":"string"},"generatedContent":{"type":"string"},"editedContent":{"type":"string"},"finalContent":{"type":"string"},"generationCount":{"type":"integer","format":"int32"},"additionalNotes":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"displayContent":{"type":"string"}}},"ReportRegenerationRequestDto":{"type":"object","description":"Report regeneration request","properties":{"reportId":{"type":"string","format":"uuid"},"userFeedback":{"type":"string"},"additionalNotes":{"type":"string"},"valid":{"type":"boolean"}}},"ReportGenerationResponseDto":{"type":"object","properties":{"reportId":{"type":"string","format":"uuid"},"userId":{"type":"string","format":"uuid"},"reportDate":{"type":"string","format":"date"},"generatedContent":{"type":"string"},"status":{"type":"string"},"generationCount":{"type":"integer","format":"int32"},"generatedAt":{"type":"string","format":"date-time"},"success":{"type":"boolean"},"errorMessage":{"type":"string"}}},"ReportGenerationRequestDto":{"type":"object","description":"Report generation request","properties":{"userId":{"type":"string","format":"uuid"},"reportDate":{"type":"string","format":"date"},"additionalNotes":{"type":"string"},"valid":{"type":"boolean"}}},"TogglCredentialCreateRequestDto":{"type":"object","description":"Toggl Track認証情報作成リクエスト","properties":{"apiKey":{"type":"string","description":"Toggl Track APIキー","example":"1234567890abcdef"},"workspaceId":{"type":"integer","format":"int64","description":"ワークスペースID","example":12345},"projectIds":{"type":"array","description":"プロジェクトID一覧","example":[12345,67890],"items":{"type":"integer","format":"int32"}},"defaultTags":{"type":"array","description":"デフォルトタグ一覧","example":["development","backend"],"items":{"type":"string"}},"timeZone":{"type":"string","default":"UTC","description":"タイムゾーン","example":"Asia/Tokyo"},"includeWeekends":{"type":"boolean","default":"false","description":"週末を含むかどうか","example":false}},"required":["apiKey"]},"TogglCredentialResponseDto":{"type":"object","description":"Toggl Track認証情報レスポンス","properties":{"id":{"type":"string","format":"uuid","description":"認証情報ID","example":"123e4567-e89b-12d3-a456-426614174000"},"userId":{"type":"string","format":"uuid","description":"ユーザーID","example":"123e4567-e89b-12d3-a456-426614174000"},"maskedApiKey":{"type":"string","description":"マスクされたAPIキー","example":"1234****cdef"},"workspaceId":{"type":"integer","format":"int64","description":"ワークスペースID","example":12345},"projectIds":{"type":"array","description":"プロジェクトID一覧","example":[12345,67890],"items":{"type":"integer","format":"int32"}},"defaultTags":{"type":"array","description":"デフォルトタグ一覧","example":["development","backend"],"items":{"type":"string"}},"timeZone":{"type":"string","description":"タイムゾーン","example":"Asia/Tokyo"},"includeWeekends":{"type":"boolean","description":"週末を含むかどうか","example":false},"projectCount":{"type":"integer","format":"int32","description":"プロジェクト数","example":2},"tagCount":{"type":"integer","format":"int32","description":"タグ数","example":2},"createdAt":{"type":"string","format":"date-time","description":"作成日時","example":"2023-01-01T00:00:00"},"updatedAt":{"type":"string","format":"date-time","description":"更新日時","example":"2023-01-01T00:00:00"},"active":{"type":"boolean"}}},"NotionCredentialCreateRequestDto":{"type":"object","description":"Notion認証情報作成リクエスト","properties":{"apiKey":{"type":"string","description":"Notion APIキー","example":"secret_xxxxxxxxxxxxxxxxxxxx"},"databaseId":{"type":"string","description":"データベースID","example":"123e4567-e89b-12d3-a456-426614174000"},"titleProperty":{"type":"string","default":"Name","description":"タイトルプロパティ名","example":"Name"},"statusProperty":{"type":"string","default":"Status","description":"ステータスプロパティ名","example":"Status"},"dateProperty":{"type":"string","default":"Date","description":"日付プロパティ名","example":"Date"},"filterConditions":{"type":"object","additionalProperties":{},"description":"フィルター条件","example":{"status":["In Progress","Done"]}}},"required":["apiKey"]},"NotionCredentialResponseDto":{"type":"object","description":"Notion認証情報レスポンス","properties":{"id":{"type":"string","format":"uuid","description":"認証情報ID","example":"123e4567-e89b-12d3-a456-426614174000"},"userId":{"type":"string","format":"uuid","description":"ユーザーID","example":"123e4567-e89b-12d3-a456-426614174000"},"maskedApiKey":{"type":"string","description":"マスクされたAPIキー","example":"secret_**********************xx"},"databaseId":{"type":"string","description":"データベースID","example":"123e4567-e89b-12d3-a456-426614174000"},"titleProperty":{"type":"string","description":"タイトルプロパティ名","example":"Name"},"statusProperty":{"type":"string","description":"ステータスプロパティ名","example":"Status"},"dateProperty":{"type":"string","description":"日付プロパティ名","example":"Date"},"filterConditions":{"type":"object","additionalProperties":{},"description":"フィルター条件","example":{"status":["In Progress","Done"]}},"createdAt":{"type":"string","format":"date-time","description":"作成日時","example":"2023-01-01T00:00:00"},"updatedAt":{"type":"string","format":"date-time","description":"更新日時","example":"2023-01-01T00:00:00"},"active":{"type":"boolean"},"fullyConfigured":{"type":"boolean"}}},"GitHubCredentialCreateRequestDto":{"type":"object","description":"GitHub認証情報作成リクエスト","properties":{"apiKey":{"type":"string","description":"GitHub APIキー","example":"ghp_xxxxxxxxxxxxxxxxxxxx"},"baseUrl":{"type":"string","default":"https://api.github.com","description":"GitHub APIベースURL","example":"https://api.github.com"},"owner":{"type":"string","description":"リポジトリオーナー","example":"octocat"},"repo":{"type":"string","description":"リポジトリ名","example":"Hello-World"}},"required":["apiKey"]},"GitHubCredentialResponseDto":{"type":"object","description":"GitHub認証情報レスポンス","properties":{"id":{"type":"string","format":"uuid","description":"認証情報ID","example":"123e4567-e89b-12d3-a456-426614174000"},"userId":{"type":"string","format":"uuid","description":"ユーザーID","example":"123e4567-e89b-12d3-a456-426614174000"},"maskedApiKey":{"type":"string","description":"マスクされたAPIキー","example":"ghp_**********************xx"},"baseUrl":{"type":"string","description":"GitHub APIベースURL","example":"https://api.github.com"},"owner":{"type":"string","description":"リポジトリオーナー","example":"octocat"},"repo":{"type":"string","description":"リポジトリ名","example":"Hello-World"},"fullRepoName":{"type":"string","description":"完全なリポジトリ名","example":"octocat/Hello-World"},"createdAt":{"type":"string","format":"date-time","description":"作成日時","example":"2023-01-01T00:00:00"},"updatedAt":{"type":"string","format":"date-time","description":"更新日時","example":"2023-01-01T00:00:00"},"active":{"type":"boolean"}}},"DailyReportListResponseDto":{"type":"object","properties":{"reports":{"type":"array","items":{"$ref":"#/components/schemas/DailyReportDto"}},"totalCount":{"type":"integer","format":"int32"},"dateRange":{"type":"string"},"actualCount":{"type":"integer","format":"int32"}}}}}}